import{F as e}from"./chunks/FigmaContainer.Cvz-boro.js";import{c as l,I as t,m as a,a as r,U as i,o}from"./chunks/framework.B9byA8Cw.js";const h=a("h1",{id:"图形编辑器项目总结",tabindex:"-1"},[r("图形编辑器项目总结 "),a("a",{class:"header-anchor",href:"#图形编辑器项目总结","aria-label":'Permalink to "图形编辑器项目总结"'},"​")],-1),n=a("h2",{id:"项目架构图",tabindex:"-1"},[r("项目架构图 "),a("a",{class:"header-anchor",href:"#项目架构图","aria-label":'Permalink to "项目架构图"'},"​")],-1),s=i('<ul><li>skia: 2D 图形库，由 C++ 用于高性能和高质量地渲染文本、形状和图像。Chrome、Flutter 都使用其作为图形渲染引擎。</li><li>canvaskit: 基于 Skia 的 WebAssembly 版本, 上层使用 WebGL 进行渲染，可以在 web 平台上提供 2D 和 3D 渲染。</li><li>palette-canvaskit: 负责与 canvaskit 渲染接口的交互，提供画布中所有基础元素的渲染。</li><li>palette-ink: 应用中的插件如基础图形、操作指针、笔、橡皮擦、bitmap、便签、文本等，解耦基础逻辑。</li><li>palette-text: 应用中的文本渲染器，从富文本到 svg 文本。</li><li>palette-renderer: 在基础渲染器上的一层，负责对插件的渲染实现。</li><li>palette-pen: 核心控制器，管理上下游所有的控制器，图形操作等。</li><li>palette-constants: 应用中所有的基础变量，类型定义等。</li><li>palette-utils: 应用中所有的工具函数。</li><li>palette-vector: 几何相关的逻辑，用于钢笔工具等基础点，线逻辑。</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>To be continued</p></div><h2 id="skia-与-canvaskit" tabindex="-1">skia 与 canvaskit <a class="header-anchor" href="#skia-与-canvaskit" aria-label="Permalink to &quot;skia 与 canvaskit&quot;">​</a></h2><p>简单描述 skia 与 canvaskit 的关系，以及他们可以做的事情</p><h3 id="canvas-与-webgl" tabindex="-1">canvas 与 webgl <a class="header-anchor" href="#canvas-与-webgl" aria-label="Permalink to &quot;canvas 与 webgl&quot;">​</a></h3><p>...</p><h3 id="skia-到-canvaskit" tabindex="-1">skia 到 canvaskit <a class="header-anchor" href="#skia-到-canvaskit" aria-label="Permalink to &quot;skia 到 canvaskit&quot;">​</a></h3><p>...</p><h2 id="项目架构设计" tabindex="-1">项目架构设计 <a class="header-anchor" href="#项目架构设计" aria-label="Permalink to &quot;项目架构设计&quot;">​</a></h2><p>...</p><h3 id="核心模块间关系" tabindex="-1">核心模块间关系 <a class="header-anchor" href="#核心模块间关系" aria-label="Permalink to &quot;核心模块间关系&quot;">​</a></h3><p>...</p><h2 id="数据结构设计" tabindex="-1">数据结构设计 <a class="header-anchor" href="#数据结构设计" aria-label="Permalink to &quot;数据结构设计&quot;">​</a></h2><h3 id="figma-数据结构" tabindex="-1">Figma 数据结构 <a class="header-anchor" href="#figma-数据结构" aria-label="Permalink to &quot;Figma 数据结构&quot;">​</a></h3>',14),c=i('<p>Figma 的数据结构比较复杂，图形间关系如上图，不做太多赘述，需要注意的有以下几点：</p><ul><li>Figma <a href="https://www.figma.com/developers/api" target="_blank" rel="noreferrer">REST API</a> 与 <a href="https://www.figma.com/plugin-docs/api/api-reference/" target="_blank" rel="noreferrer">PLUGIN API</a> 数据结构存在差异</li><li>如何拿到 Figma 源数据，有以下几个方式 <ul><li>可以使用下面这个服务：<a href="https://pengyyyyy.github.io/figma-api-live/#/figma" target="_blank" rel="noreferrer">figma-api-live</a>，原理是通过 rest api。</li><li>通过 figma 插件，拿到画布上下文，</li><li>直接解析 figma 的 fig 文件，开发者写的<a href="https://github.com/yagudaev/figma-to-json" target="_blank" rel="noreferrer">figma-to-json</a>，Figma CTO 写的 <a href="https://madebyevan.com/figma/fig-file-parser/" target="_blank" rel="noreferrer">fig-file-parser</a></li></ul></li></ul><h2 id="渲染层" tabindex="-1">渲染层 <a class="header-anchor" href="#渲染层" aria-label="Permalink to &quot;渲染层&quot;">​</a></h2><p>白板渲染流程</p><h3 id="渲染流程" tabindex="-1">渲染流程 <a class="header-anchor" href="#渲染流程" aria-label="Permalink to &quot;渲染流程&quot;">​</a></h3><p>...</p><h3 id="基础图形渲染" tabindex="-1">基础图形渲染 <a class="header-anchor" href="#基础图形渲染" aria-label="Permalink to &quot;基础图形渲染&quot;">​</a></h3><p>...</p><h3 id="图形表现渲染" tabindex="-1">图形表现渲染 <a class="header-anchor" href="#图形表现渲染" aria-label="Permalink to &quot;图形表现渲染&quot;">​</a></h3><p>边框、填充、模糊 等渲染</p><h3 id="服务器" tabindex="-1">服务器 <a class="header-anchor" href="#服务器" aria-label="Permalink to &quot;服务器&quot;">​</a></h3><h2 id="编辑层" tabindex="-1">编辑层 <a class="header-anchor" href="#编辑层" aria-label="Permalink to &quot;编辑层&quot;">​</a></h2><p>...</p><h3 id="平移与变换" tabindex="-1">平移与变换 <a class="header-anchor" href="#平移与变换" aria-label="Permalink to &quot;平移与变换&quot;">​</a></h3><p>...</p><h3 id="辅助线" tabindex="-1">辅助线 <a class="header-anchor" href="#辅助线" aria-label="Permalink to &quot;辅助线&quot;">​</a></h3><p>...</p><h3 id="四叉树" tabindex="-1">四叉树 <a class="header-anchor" href="#四叉树" aria-label="Permalink to &quot;四叉树&quot;">​</a></h3><p>...</p><h3 id="撤销重做" tabindex="-1">撤销重做 <a class="header-anchor" href="#撤销重做" aria-label="Permalink to &quot;撤销重做&quot;">​</a></h3><p>...</p><h2 id="应用层" tabindex="-1">应用层 <a class="header-anchor" href="#应用层" aria-label="Permalink to &quot;应用层&quot;">​</a></h2><h3 id="应用搭建与产品接入" tabindex="-1">应用搭建与产品接入 <a class="header-anchor" href="#应用搭建与产品接入" aria-label="Permalink to &quot;应用搭建与产品接入&quot;">​</a></h3><h3 id="toolbar-与-editorbar" tabindex="-1">ToolBar 与 EditorBar <a class="header-anchor" href="#toolbar-与-editorbar" aria-label="Permalink to &quot;ToolBar 与 EditorBar&quot;">​</a></h3><h3 id="ai模版" tabindex="-1"><a href="https://mp.weixin.qq.com/s/HrxQtfc8j-zD9kMRGhTn6w" target="_blank" rel="noreferrer">AI模版</a> <a class="header-anchor" href="#ai模版" aria-label="Permalink to &quot;[AI模版](https://mp.weixin.qq.com/s/HrxQtfc8j-zD9kMRGhTn6w)&quot;">​</a></h3><h2 id="todo" tabindex="-1">TODO <a class="header-anchor" href="#todo" aria-label="Permalink to &quot;TODO&quot;">​</a></h2><h3 id="协同编辑" tabindex="-1">协同编辑 <a class="header-anchor" href="#协同编辑" aria-label="Permalink to &quot;协同编辑&quot;">​</a></h3><p>...</p><h4 id="ot-operational-transformation-算法" tabindex="-1">OT(Operational Transformation) 算法 <a class="header-anchor" href="#ot-operational-transformation-算法" aria-label="Permalink to &quot;OT(Operational Transformation) 算法&quot;">​</a></h4><p>...</p><h4 id="crdt-conflict-free-replicated-data-type-算法" tabindex="-1">CRDT(Conflict-Free Replicated Data Type) 算法 <a class="header-anchor" href="#crdt-conflict-free-replicated-data-type-算法" aria-label="Permalink to &quot;CRDT(Conflict-Free Replicated Data Type) 算法&quot;">​</a></h4><p>...</p><h3 id="基于-path-的文本渲染" tabindex="-1">基于 path 的文本渲染 <a class="header-anchor" href="#基于-path-的文本渲染" aria-label="Permalink to &quot;基于 path 的文本渲染&quot;">​</a></h3>',33),k=JSON.parse('{"title":"图形编辑器项目总结","description":"","frontmatter":{},"headers":[],"relativePath":"article/record/board.md","filePath":"article/record/board.md","lastUpdated":1710086962000}'),d={name:"article/record/board.md"},q=Object.assign(d,{setup(p){return(b,m)=>(o(),l("div",null,[h,n,t(e,{url:"https://www.figma.com/file/E2utI9rEseFTc7tJ3Bbl9o/blog?type=whiteboard&node-id=1266%3A432&t=VhmgWJhomfVcVNWz-1"}),s,t(e,{url:"https://www.figma.com/file/E2utI9rEseFTc7tJ3Bbl9o/blog?type=whiteboard&node-id=2658-1361&t=lro20nPzgjXTpsNK-4"}),c]))}});export{k as __pageData,q as default};
