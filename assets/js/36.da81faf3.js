(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{387:function(t,s,e){"use strict";e.r(s);var a=e(25),o=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"jwt与session-cookie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jwt与session-cookie"}},[t._v("#")]),t._v(" jwt与session-cookie")]),t._v(" "),e("p",[t._v("基于session和基于jwt的方式的主要区别就是用户的状态保存的位置，session是保存在服务端的，而jwt是保存在客户端的。")]),t._v(" "),e("h2",{attrs:{id:"jwt的优点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jwt的优点"}},[t._v("#")]),t._v(" JWT的优点")]),t._v(" "),e("ol",[e("li",[t._v("可扩展性好 应用程序分布式部署的情况下，session需要做多机数据共享，通常可以存在数据库或者redis里面。而jwt不需要。")]),t._v(" "),e("li",[t._v("无状态 jwt不在服务端存储任何状态。RESTful API的原则之一是无状态，发出请求时，总会返回带有参数的响应，不会产生附加影响。用户的认证状态引入这种附加影响，这破坏了这一原则。另外jwt的载荷中可以存储一些常用信息，用于交换信息，有效地使用 JWT，可以降低服务器查询数据库的次数。")])]),t._v(" "),e("h2",{attrs:{id:"jwt的缺点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jwt的缺点"}},[t._v("#")]),t._v(" JWT的缺点")]),t._v(" "),e("ul",[e("li",[t._v("安全性")])]),t._v(" "),e("p",[t._v("由于jwt的payload是使用base64编码的，并没有加密，因此jwt中不能存储敏感数据。而session的信息是存在服务端的，相对来说更安全。")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("性能\njwt太长。由于是无状态使用JWT，所有的数据都被放到JWT里，如果还要进行一些数据交换，那载荷会更大，经过编码之后导致jwt非常长，cookie的限制大小一般是4k，cookie很可能放不下，所以jwt一般放在local storage里面。并且用户在系统中的每一次http请求都会把jwt携带在Header里面，http请求的Header可能比Body还要大。而sessionId只是很短的一个字符串，因此使用jwt的http请求比使用session的开销大得多。")])]),t._v(" "),e("li",[e("p",[t._v("一次性")])])]),t._v(" "),e("p",[t._v("无状态是jwt的特点，但也导致了这个问题，jwt是一次性的。想修改里面的内容，就必须签发一个新的jwt。无法废弃 通过上面jwt的验证机制可以看出来，一旦签发一个jwt，在到期之前就会始终有效，无法中途废弃。")]),t._v(" "),e("ul",[e("li",[t._v("续签")])]),t._v(" "),e("p",[t._v("要改变jwt的有效时间，就要签发新的jwt。最简单的一种方式是每次请求刷新jwt，即每个http请求都返回一个新的jwt。这个方法不仅暴力不优雅，而且每次请求都要做jwt的加密解密，会带来性能问题。")]),t._v(" "),e("h2",{attrs:{id:"适合使用jwt的场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#适合使用jwt的场景"}},[t._v("#")]),t._v(" 适合使用JWT的场景")]),t._v(" "),e("ul",[e("li",[t._v("有效期短")]),t._v(" "),e("li",[t._v("只希望被使用一次")])]),t._v(" "),e("p",[t._v("用户注册后发一封邮件让其激活账户，通常邮件中需要有一个链接，这个链接需要具备以下的特性：能够标识用户，该链接具有时效性（通常只允许几小时之内激活），不能被篡改以激活其他可能的账户，一次性的。这种场景就适合使用jwt。")])])}),[],!1,null,null,null);s.default=o.exports}}]);