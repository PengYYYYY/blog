# 谈谈对ssr的一些理解

## 先画一下ssr的架构图

![img](http://ww1.sinaimg.cn/large/006ekNqVgy1ghtlkx66fwj31kk0ondlc.jpg)

## ssr解决的问题

`spa`颠覆了前端的开发模式，但是`spa`的缺点是首次需要加载大量的资源，当然可以用分包来缩小包体积。`spa`的首屏确实是存在问题的。并且`spa`首个被加载的`html`内容并不是用户看到的内容，不利于`ssr`.

## ssr的优点和缺点

### 优点

#### 更好的seo

爬虫只会爬取源码。使用了`Vue`或者其它`MVVM`框架之后，页面大多数`DOM`元素都是在客户端根据`js`动态生成，可供爬虫抓取分析的内容大大减少。另外，浏览器爬虫不会等待我们的数据完成之后再去抓取我们的页面数据。服务端渲染返回给客户端的是已经获取了异步数据并执行`JavaScript`脚本的最终`HTML`，网络爬中就可以抓取到完整页面的信息。

#### 更快首屏的渲染

首屏的渲染是 `node` 发送过来的 `html` 字符串，并不依赖 `js` 文件,这就会使用户更快的看到页面的内容。大型的单页应用，打包后体积很大，客户端渲染加载所有所需文件时间较长，首页就会有一段白屏时间。

### 缺点

#### 服务端压力大

统一到服务端`node`做渲染，会大量占用服务端`CPU`资源.

#### 更大的迁移成本

除了对webpack、Vue要熟悉，还需要掌握node、Express相关技术。相对于客户端渲染，项目构建、部署过程更加复杂。

### 只是首屏加载快

只是首屏加载快，对用户已经看过的页面没有优势，每次都要请求服务端数据

### 开发成本

某些声明周期钩子函数（如beforeCreate、created）能同时运行在服务端和客户端，因此第三方库要做特殊处理，才能在服务器渲染应用程序中运行。而前端开发的发展的主线一直在解决开发效率的问题。

## 关于nuxt

nuxt约定配置过多，适合从0开始开发一个新的应用，并且有ssr的需求，并且会带来一些学习成本，主要是各种约定。开发体验足够好。

## 其他方案

如果只是单方面对`seo`的要求的话,可以使用 `pre-render-plugin`这个组件，将重要的需要`seo`的页面单独打出来。这也是官方十分推荐的方式，因为如果从0开始做一套新的ssr架构的话，带来的技术难度是成倍的。
